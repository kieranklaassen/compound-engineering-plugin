{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Compound Engineering Plugin Configuration",
  "description": "Configuration for compound-engineering plugin component selection",
  "type": "object",
  "oneOf": [
    {
      "title": "Bundle-based configuration (v2.0)",
      "properties": {
        "$schema": { "type": "string" },
        "version": { "const": "2.0" },
        "description": { "type": "string" },
        "bundles": {
          "type": "object",
          "properties": {
            "ruby-rails": { "type": "boolean" },
            "ruby-gems": { "type": "boolean" },
            "python": { "type": "boolean" },
            "typescript": { "type": "boolean" },
            "data-migrations": { "type": "boolean" },
            "browser-automation": { "type": "boolean" },
            "frontend-design": { "type": "boolean" },
            "figma": { "type": "boolean" },
            "agent-native-dev": { "type": "boolean" },
            "plugin-dev": { "type": "boolean" },
            "every-style": { "type": "boolean" },
            "ios-xcode": { "type": "boolean" },
            "utilities": { "type": "boolean" }
          },
          "additionalProperties": { "type": "boolean" }
        }
      },
      "required": ["version", "bundles"]
    },
    {
      "title": "Legacy configuration (v1.0)",
      "properties": {
        "$schema": { "type": "string" },
        "description": { "type": "string" },
        "agents": { "$ref": "#/definitions/componentConfig" },
        "commands": { "$ref": "#/definitions/componentConfig" },
        "skills": { "$ref": "#/definitions/componentConfig" },
        "mcpServers": { "$ref": "#/definitions/componentConfig" }
      }
    }
  ],
  "definitions": {
    "componentConfig": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Components to enable. Use ['*'] for all."
        },
        "disabled": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Components to disable (applied after enabled)."
        }
      }
    }
  }
}
